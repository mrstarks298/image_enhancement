<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Processing</title>
    <style>
        #canvas {
            border: 1px solid black;
            margin-bottom: 10px;
            cursor: crosshair;
        }
    </style>
</head>
<body>
    <input type="file" id="fileInput" accept="image/*">
    <canvas id="canvas" width="400" height="400"></canvas>
    <button id="rotateButton">Rotate</button>
    <button id="grayscaleButton">Grayscale</button>
    <select id="blurSelect">
        <option value="original">Original</option>
        <option value="gaussian">Gaussian Blur</option>
        <option value="box">Box Blur</option>
        <option value="median">Median Filter</option>
        <option value="contour">Contour Filter</option>
        <option value="detail">Detail Filter</option>
        <option value="edge_enhance">Edge Enhance Filter</option>
        <option value="emboss">Emboss Filter</option>
    </select>
    <button id="writeTextButton">Write Text</button>
    <button id="cropButton">Crop</button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="{{ url_for('static', filename='image_processing.js') }}"></script>
</body>
</html> -->
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Enhancement</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">Enhance Image</h2>
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center">Upload Image</h3>
                    </div>
                    <div class="card-body">
                        <form action="/" method="post" enctype="multipart/form-data">
                            <div class="form-group">
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="customFile" name="file" required aria-label="File">
                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                </div>
                            </div>
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary">Upload</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                {% if filename %}
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center">Uploaded Image</h3>
                    </div>
                    <div class="card-body">
                        <img src="{{ image_path }}" class="img-fluid" alt="Uploaded Image">

                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html> -->
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Enhancement</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">Enhance Image</h2>
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center">Upload Image</h3>
                    </div>
                    <div class="card-body">
                        <form action="/" method="post" enctype="multipart/form-data">
                            <div class="form-group">
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="customFile" name="file" required aria-label="File">
                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                </div>
                            </div>
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary">Upload</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                {% if filename %}
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center">Uploaded Image</h3>
                    </div>
                    <div class="card-body">
                        <img src="{{ image_path }}" class="img-fluid" alt="Uploaded Image">
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html> -->
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Enhancement</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">Enhance Image</h2>
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center">Upload Image</h3>
                    </div>
                    <div class="card-body">
                        <form action="/" method="post" enctype="multipart/form-data">
                            <div class="form-group">
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="customFile" name="file" required aria-label="File">
                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="operation">Choose Operation:</label>
                                <select name="operation" id="operation" class="form-control">
                                    <option value="rotate">Rotate</option>
                                    <option value="grayscale">Grayscale</option>
                                    <option value="blur">Blur</option>
                                    <option value="text">Add Text</option> <!-- New option for adding text 
                                </select>
                            </div>
                            <div class="form-group" id="angleDiv" style="display: none;">
                                <label for="angle">Angle:</label>
                                <input type="number" name="angle" id="angle" class="form-control" value="0">
                            </div>
                            <div class="form-group" id="blurTypeDiv" style="display: none;">
                                <label for="blurType">Blur Type:</label>
                                <select name="blur_type" id="blurType" class="form-control">
                                    <option value="gaussian">Gaussian Blur</option>
                                    <option value="box">Box Blur</option>
                                </select>
                            </div>
                            <div class="form-group" id="textDiv" style="display: none;"> <!-- New form group for text 
                                <label for="text">Text:</label>
                                <input type="text" name="text" id="text" class="form-control" placeholder="Enter text">
                                <label for="textX">X-coordinate:</label>
                                <input type="number" name="text_x" id="textX" class="form-control" value="0">
                                <label for="textY">Y-coordinate:</label>
                                <input type="number" name="text_y" id="textY" class="form-control" value="0">
                                <label for="fontScale">Font Scale:</label>
                                <input type="number" name="font_scale" id="fontScale" class="form-control" value="1">
                                <label for="fontThickness">Font Thickness:</label>
                                <input type="number" name="font_thickness" id="fontThickness" class="form-control" value="1">
                                <label for="textColor">Text Color (RGB):</label>
                                <input type="text" name="text_color" id="textColor" class="form-control" placeholder="e.g., 255,255,255">
                            </div>
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary">Apply</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                {% if filename %}
                <div class="card">
                    <!-- Inside the form 
                <div class="form-group">
                    <label for="angle">Rotation Angle:</label>
                <input type="number" name="angle" id="angle" class="form-control" placeholder="Enter Rotation Angle">
</div>

                    <div class="card-header">
                        <h3 class="text-center">Uploaded Image</h3>
                    </div>
                    <div class="card-body">
                        <img src="{{ image_path }}" class="img-fluid" alt="Uploaded Image">

                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <script>
        document.getElementById('operation').addEventListener('change', function() {
            var operation = this.value;
            if (operation === 'rotate') {
                document.getElementById('angleDiv').style.display = 'block';
                document.getElementById('blurTypeDiv').style.display = 'none';
                document.getElementById('textDiv').style.display = 'none'; // Hide text options
            } else if (operation === 'blur') {
                document.getElementById('angleDiv').style.display = 'none';
                document.getElementById('blurTypeDiv').style.display = 'block';
                document.getElementById('textDiv').style.display = 'none'; // Hide text options
            } else if (operation === 'text') {
                document.getElementById('angleDiv').style.display = 'none';
                document.getElementById('blurTypeDiv').style.display = 'none';
                document.getElementById('textDiv').style.display = 'block'; // Show text options
            } else {
                document.getElementById('angleDiv').style.display = 'none';
                document.getElementById('blurTypeDiv').style.display = 'none';
                document.getElementById('textDiv').style.display = 'none'; // Hide text options
            }
        });
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html -->
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Enhancement</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">Enhance Image</h2>
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center">Upload Image</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <div class="custom-file">
                                <input type="file" class="custom-file-input" id="customFile" name="file" required aria-label="File" style="display: none;">
                                <label class="custom-file-label" for="customFile">Choose file</label>
                            </div>
                        </div>
                        <div class="text-center">
                            <button type="button" class="btn btn-primary" id="uploadButton">Upload Image</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card" id="uploadedImageCard" style="display: none;">
                    <div class="card-header">
                        <h3 class="text-center">Uploaded Image</h3>
                    </div>
                    <div class="card-body">
                        <img id="uploadedImage" class="img-fluid" alt="Uploaded Image">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('uploadButton').addEventListener('click', function() {
            document.getElementById('customFile').click();
        });

        document.getElementById('customFile').addEventListener('change', function() {
            var file = this.files[0];
            if (file) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('uploadedImage').src = e.target.result;
                    document.getElementById('uploadedImageCard').style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html> -->
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Enhancement</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">Enhance Image</h2>
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center">Upload Image</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <div class="custom-file">
                                <input type="file" class="custom-file-input" id="customFile" name="file" required aria-label="File" style="display: none;">
                                <label class="custom-file-label" for="customFile">Choose file</label>
                            </div>
                        </div>
                        <div class="text-center">
                            <button type="button" class="btn btn-primary" id="uploadButton">Upload Image</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card" id="uploadedImageCard" style="display: none;">
                    <div class="card-header">
                        <h3 class="text-center">Uploaded Image</h3>
                    </div>
                    <div class="card-body">
                        <img id="uploadedImage" class="img-fluid" alt="Uploaded Image">
                    </div>
                </div>
                <div class="mt-3">
                    <button type="button" class="btn btn-success mr-2" id="rotateButton">Rotate</button>
                    <button type="button" class="btn btn-info mr-2" id="grayscaleButton">Grayscale</button>
                    <button type="button" class="btn btn-warning mr-2" id="blurButton">Blur</button>
                    <button type="button" class="btn btn-secondary" id="textButton">Add Text</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('rotateButton').addEventListener('click', function() {
    enhanceImage('rotate');
});

document.getElementById('grayscaleButton').addEventListener('click', function() {
    enhanceImage('grayscale');
});

document.getElementById('blurButton').addEventListener('click', function() {
    enhanceImage('blur');
});

document.getElementById('textButton').addEventListener('click', function() {
    enhanceImage('add_text');
});

function enhanceImage(operation) {
    var filename = document.getElementById('uploadedImage').src;
    // Send AJAX request to Flask server
    fetch('/enhance/' + encodeURIComponent(filename) + '?operation=' + operation, {
        method: 'POST'
    })
    .then(response => {
        if (response.ok) {
            // Update the displayed image with the enhanced image
            document.getElementById('uploadedImage').src = response.url;
        } else {
            // Handle error
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
}

    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Enhancement</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">Enhance Image</h2>
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center">Upload Image</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <div class="custom-file">
                                <input type="file" class="custom-file-input" id="customFile" name="file" required aria-label="File" style="display: none;">
                                <label class="custom-file-label" for="customFile">Choose file</label>
                            </div>
                        </div>
                        <div class="text-center">
                            <button type="button" class="btn btn-primary" id="uploadButton">Upload Image</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card" id="uploadedImageCard" style="display: none;">
                    <div class="card-header">
                        <h3 class="text-center">Uploaded Image</h3>
                    </div>
                    <div class="card-body">
                        <img id="uploadedImage" class="img-fluid" alt="Uploaded Image">
                    </div>
                </div>
                <div class="mt-3">
                    <button type="button" class="btn btn-success mr-2" id="rotateButton">Rotate</button>
                    <button type="button" class="btn btn-info mr-2" id="grayscaleButton">Grayscale</button>
                    <button type="button" class="btn btn-warning mr-2" id="blurButton">Blur</button>
                    <button type="button" class="btn btn-secondary" id="textButton">Add Text</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        
    document.getElementById('uploadButton').addEventListener('click', function() {
        document.getElementById('customFile').click();
    });

    document.getElementById('customFile').addEventListener('change', function() {
        var file = this.files[0];
        if (file) {
            var reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('uploadedImage').src = e.target.result;
                document.getElementById('uploadedImageCard').style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
    });

    document.getElementById('rotateButton').addEventListener('click', function() {
        console.log('Sending rotate request...');
        enhanceImage('rotate');
    });

    document.getElementById('grayscaleButton').addEventListener('click', function() {
        console.log('Sending grayscale request...');
        enhanceImage('grayscale');
    });

    document.getElementById('blurButton').addEventListener('click', function() {
        console.log('Sending blur request...');
        enhanceImage('blur');
    });

    document.getElementById('textButton').addEventListener('click', function() {
        console.log('Sending add text request...');
        enhanceImage('add_text');
    });

    function enhanceImage(operation) {
        var filename = document.getElementById('uploadedImage').src;
        // Send AJAX request to Flask server
        fetch('/enhance/' + encodeURIComponent(filename) + '?operation=' + operation, {
            method: 'POST'
        })
        .then(response => {
            console.log('Response received:', response);
            if (response.ok) {
                // Update the displayed image with the enhanced image
                document.getElementById('uploadedImage').src = response.url;
            } else {
                // Handle error
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }


    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
